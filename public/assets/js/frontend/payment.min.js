function stripeClientSecret(e){let a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="token"]').content),a.addEventListener("error",()=>{toaster(langVars.error,0)}),a.addEventListener("abort",()=>{toaster(langVars.cancelled,0)}),a.addEventListener("load",()=>{var e,t,r;a.readyState===XMLHttpRequest.DONE&&200===a.status?(e=JSON.parse(a.responseText)).result?((t=document.querySelector("#stripe-payment")).innerHTML="",(r=document.createElement("div")).innerHTML=`<div id="payment-element"></div>
                    <button id="submit" class="btn btn-color-2 w-100 mt-3 disabled" disabled>
                        ${langVars.pay_now}
                    </button>
                    <div id="error-message"></div>`,t.appendChild(r),stripeInit(e.data)):toaster(e.data,0):toaster(langVars.error,0)}),a.send()}function stripeInit(e){let t=Stripe(stripePublic);let r=t.elements({clientSecret:e}),a=(r.create("payment").mount("#payment-element"),document.getElementById("stripe-payment"));setTimeout(()=>{a.querySelector("#submit").classList.remove("disabled"),a.querySelector("#submit").disabled=!1},1500),a.addEventListener("submit",async e=>{e.preventDefault();e=(await t.confirmPayment({elements:r,confirmParams:{return_url:stripeReturn}})).error;e&&(document.querySelector("#error-message").textContent=e.message)})}function razorpayOrderId(e){let r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="token"]').content),r.addEventListener("error",()=>{toaster(langVars.error,0)}),r.addEventListener("abort",()=>{toaster(langVars.cancelled,0)}),r.addEventListener("load",()=>{if(r.readyState===XMLHttpRequest.DONE&&200===r.status){var t=JSON.parse(r.responseText);if(t.result){let e=document.querySelector("#razorpay-payment").querySelector("button");e.setAttribute("data-order",t.data),setTimeout(()=>{e.classList.remove("disabled"),e.disabled=!1},1500)}else toaster(t.data,0)}else toaster(langVars.error,0)}),r.send()}function razorpayInit(e){var t=e.getAttribute("data-order"),r=t.replace("order_",""),e={key:razorpayPublic,amount:e.getAttribute("data-price"),currency:e.getAttribute("data-currency"),name:e.getAttribute("data-name"),order_id:t,callback_url:razorpayReturn+"/"+r},t=new Razorpay(e);t.on("payment.failed",function(e){toaster(e.error.code+": "+e.error.description,0)}),t.open()}document.addEventListener("click",function(e){e.target.matches("#razorpay-payment button")&&(e.preventDefault(),razorpayInit(e.target))}),document.addEventListener("show.bs.collapse",function(e){e.target.matches("#stripe-cc")&&stripeClientSecret(e.target.getAttribute("data-token")),e.target.matches("#razorpay-cc")&&razorpayOrderId(e.target.getAttribute("data-token"))});